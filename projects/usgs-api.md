
# API Endpoint

This website provides a `GET` methods for developers to retrieve earthquake probabilities at a given geolocation of a future time period. 

## URL
GET http://localhost:8080/api/forecasts/filter/

Returns forecast data of available regions during the selected time period. The data are ground shaking probabilities in every intensity scale of PGA model and/or MMI model.

## Method
<button>GET</button>

## Sample Request
```
curl --get --include 'http://localhost:8080/api/forecasts/filter?longitude=-121&latitude=36&radius=100&tstart=2016-05-02&tend=2016-05-03
```

## Request Parameters

| Parameter	| Description | Data Type | Required | Notes
| :--- | :---| :---| --- |--- |
| tstart| The start date of forecast. | date. The format is `yyyy-mm-dd`. For example: `2016-05-02`. | Optional | If not specified, the default start date is tomorrow, which is the earliest date available in the database. | 
| tend | The end date of the forecast. | date. The format is `yyyy-mm-dd`. For example: `2016-05-03`. | Optional | If not specified, the default end date is the last day available in the database. It varies from 3 months to 10 years.| 
| latitude | The latitude of a geolocation. | number | Optional | Default is the center point of map view. If specified, values will be clamped to the range [-90, 90]. |
| longitude | The longitude of a geolocation.  | number | Optional | Default is the center point of map view. If specified, values outside range will be clamped to [-180, 180]. |
| radius | The radius in meters on the earth surface. | number | Optional | Default is 100. |


## Sample Response
```JSON
     {
        "_id": "593befd6e88fa7480637dc9e",
        "loc": [
            -122.6,
            36.5
        ],
        "ForecastVersion": "1",
        "p_MMI": {
            "IX": 0,
            "I": 1,
            "VI": 0,
            "VII": 0,
            "IV": 2.2e-7,
            "II": 0.01418085,
            "VIII": 0,
            "V": 2e-8,
            "X": 0,
            "III": 0.00000681
        },
        "longitude": -122.6,
        "tend": "2016-05-03 09:42:19",
        "p_PGA": {
            "0.9": 0,
            "0.8": 0,
            "1.4": 0,
            "1.0": 0,
            "1.1": 0,
            "1.2": 0,
            "1.3": 0,
            "0.1": 0,
            "0.3": 0,
            "0.2": 0,
            "0.5": 0,
            "0.4": 0,
            "0.7": 0,
            "0.6": 0,
            "1.5": 0
        },
        "tstart": "2016-05-02 09:42:19",
        "latitude": 36.5,
        "ForecastID": "29042a9c-0c5c-4317-b0ad-133260a0d56f"
    },
```

The following table describes each item in the response.

| Element | Description |
| :--- | :---|
| _id |	Internal ID of each region in database. This is automatically generated by database.|
| loc | The coordinates of a returned geolocation, which is an array of longitude and magnitude. |
| ForecastVersion | The version of forecast from database. |
| p_MMI | Returns an object of probabilities for all MMI scales which range from I to V. For example, **"V": 2e-8** means the probability of MMI scale V is **2e-8**. |
| longitude | The longitude of the returned geolocation. |
| tend | The end date and time of the forecast. |
| p_PGA| Returns an object of probabilities for all PGA intensity scales. **"0.9": 0** means the probability of a ground shaking event which exceeds 0.9 multiplied gravity acceleration is zero. |
| tstart| The start date time of the forecast. |
| latitude | The latitude of the returned geolocation.  |
| ForecastID| The autogenerated forecast ID.  | 


## Error and Status Codes
The following table lists the status and error codes related to this request.

|Status code |	Description | Notes |
| :--- | :--- | :---|
| 200 | OK | Successful response. |
| 404 | Not found | The resource query does not match any in the database. |
|4112 |	The region ID was not found in the lookup. |


